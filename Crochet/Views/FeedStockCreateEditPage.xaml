<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:prism="http://prismlibrary.com"
             xmlns:controls="clr-namespace:Crochet.Controls"
             xmlns:android="clr-namespace:Xamarin.Forms.PlatformConfiguration.AndroidSpecific;assembly=Xamarin.Forms.Core"
             prism:ViewModelLocator.AutowireViewModel="True"
             Title="Linhas"
             x:Class="Crochet.Views.FeedStockCreateEditPage"             
             xmlns:skia="clr-namespace:SkiaSharp.Views.Forms;assembly=SkiaSharp.Views.Forms"
             BackgroundColor="{StaticResource BGColor}">
    <ContentPage.Content>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <ImageButton Source="spool.png"
                       BackgroundColor="{Binding Color}"
                       Clicked="ImageButton_Clicked"
                       HorizontalOptions="Center"/>
            <FlexLayout Direction="Column"
                        Margin="25,10"
                        Grid.Row="1"
                        AutomationId="FlexForm">
                <Entry x:Name="EnPrice"
                       Placeholder="Preço"
                       ReturnType="Next"
                       Keyboard="Numeric"
                       Text="{Binding Price, StringFormat='{0:C}'}"
                       Style="{StaticResource EntryStyle}"/>
                <FlexLayout Direction="Row" HeightRequest="40">
                    <Entry x:Name="EnInvAva"
                       Placeholder="Qtde. Disponível"
                       ReturnType="Next"
                       Keyboard="Numeric"
                       Text="{Binding InventoryAvailable}"
                       Style="{StaticResource EntryStyle}"
                       FlexLayout.Grow="1"/>
                    <Label Text="/"
                           FontSize="Large"/>
                    <Entry x:Name="EnInvTot"
                       Placeholder="Qtde. Total"
                       ReturnType="Next"
                       Keyboard="Numeric"
                       Text="{Binding InventoryTotal}"
                       Style="{StaticResource EntryStyle}"
                       FlexLayout.Grow="1"/>
                    <Label Text="g" FontSize="Medium"
                           Margin="0,10,0,0"/>
                </FlexLayout>
                <Entry x:Name="EnTEX"
                       Placeholder="TEX"
                       ReturnType="Next"
                       Keyboard="Numeric"
                       Text="{Binding TEX}"
                       Style="{StaticResource EntryStyle}"/>
                <Entry x:Name="EnColorCode"
                       Placeholder="Código da Cor"
                       ReturnType="Next"
                       Keyboard="Numeric"
                       Text="{Binding ColorCode}"
                       Style="{StaticResource EntryStyle}"/>
                <Entry x:Name="EnThic"
                       Placeholder="Espessura"
                       ReturnType="Done"
                       Keyboard="Numeric"
                       Text="{Binding Thickness}"
                       Style="{StaticResource EntryStyle}"/>
                <FlexLayout Direction="Row"
                            FlexLayout.Grow="1" 
                            AlignItems="Start">
                    <Picker Title="Selecione a Marca"
                            ItemsSource="{Binding Brands}"
                            SelectedItem="{Binding Brand, Mode=TwoWay}"                            
                            ItemDisplayBinding="{Binding Name}"
                            Style="{StaticResource PickerStyle}"
                            FlexLayout.Basis="80%"
                            Margin="0,15"/>
                    <Button Text="+"
                            Command="{Binding FeedStockCreateBrandCommand}"
                            Style="{StaticResource ButtonStyleAdd}"
                            FontSize="Large"
                            FlexLayout.Basis="20%"/>
                </FlexLayout>
                <Button Text="Salvar"
                        Command="{Binding FeedStockCreateCommand}"
                        Style="{StaticResource ButtonStyle}"/>
            </FlexLayout>
            <controls:ColorPickerControl
                 Grid.Row="1"
                    PickedColor="{Binding Color}"
                    CardStated="Collapsed"
                    x:Name="ColorPicker"/>
        </Grid>
    </ContentPage.Content>

</ContentPage>